# Shared Environment Variables
# This file contains non-sensitive environment variables shared between:
# - Docker Compose (local development)
# - Kubernetes deployments (production)
#
# DO NOT put sensitive values (API keys, secrets, passwords) in this file.
# Those belong in .env.secrets (local) or Kubernetes Secrets (production).
#
# IMPORTANT: When you update this file, sync it to the infrastructure repo:
#   cp agentllm/.env.shared rhdh-sidekick-infra/manifests/sidekick/base/.env.shared

# ============================================================================
# Python Configuration
# ============================================================================
PYTHONUNBUFFERED=1
PYTHONPATH=/app

# ============================================================================
# LiteLLM Proxy Configuration
# ============================================================================
# Database path for Agno sessions
DB_PATH=/app/tmp/agno_sessions.db
AGENTLLM_DATA_DIR=/app/tmp

# ============================================================================
# Knowledge Base / RAG Configuration
# ============================================================================
# Knowledge base configuration is now per-agent (defined in agent configurators).
# No environment variables needed.

# ============================================================================
# Agent UI Display Configuration
# ============================================================================

# Tool Result Display Truncation (Optional)
# Maximum characters to display for tool results in Open WebUI chat interface.
# This prevents large tool outputs (like knowledge base searches) from cluttering the chat.
# - Set to a number (e.g., 500) to enable truncation with "... (truncated, X chars total)" indicator
# - Leave unset or empty for no truncation (shows full results)
# - Individual agents can override this (e.g., demo-agent uses 500 regardless of this setting)
# Recommended: 500-1000 for cleaner UI
#AGENTLLM_MAX_TOOL_RESULT_LENGTH=500

# ============================================================================
# OpenWebUI Configuration
# ============================================================================

# Data directories
DATA_DIR=/app/backend/data
WEBUI_SECRET_KEY_PATH=/app/backend/data/.webui_secret_key
STATIC_DIR=/app/backend/data/static

# Authentication settings
WEBUI_AUTH=true
ENABLE_SIGNUP=false
WEBUI_SESSION_COOKIE_SAME_SITE=lax

# OAuth configuration (provider settings, not credentials)
ENABLE_OAUTH_SIGNUP=true
OAUTH_PROVIDER_NAME=Google
OAUTH_MERGE_ACCOUNTS_BY_EMAIL=true
OPENID_PROVIDER_URL=https://accounts.google.com/.well-known/openid-configuration
OAUTH_SCOPES=openid email profile

# Model configuration
DEFAULT_MODELS=agno/release-manager

# Feature flags - disable unused features
ENABLE_OLLAMA_API=false
ENABLE_COMMUNITY_SHARING=false
ENABLE_RAG_WEB_SEARCH=false

# Offline mode - prevents model downloads
OFFLINE_MODE=True
RAG_EMBEDDING_MODEL=
RAG_EMBEDDING_ENGINE=

# User info forwarding (for agent context)
ENABLE_FORWARD_USER_INFO_HEADERS=true

# https://github.com/open-webui/open-webui/issues/17626
CHAT_STREAM_RESPONSE_CHUNK_MAX_BUFFER_SIZE=10485760
